<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"liyun-zhang.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.17.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Paper: Elf: Accelerate High-resolution Mobile Deep Vision with Content-aware Parallel Offloading @[toc] Purpose To support applications running deep neural networks on multimedia data in real-time, ha">
<meta property="og:type" content="article">
<meta property="og:title" content="Elf">
<meta property="og:url" content="http://liyun-zhang.github.io/2023/10/04/Paper/Sys4AI/ELF/index.html">
<meta property="og:site_name" content="LiyunZhang">
<meta property="og:description" content="Paper: Elf: Accelerate High-resolution Mobile Deep Vision with Content-aware Parallel Offloading @[toc] Purpose To support applications running deep neural networks on multimedia data in real-time, ha">
<meta property="og:locale">
<meta property="og:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/partition.png">
<meta property="og:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/server_num.png">
<meta property="og:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/GPUutilization.png">
<meta property="og:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/network.png">
<meta property="og:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/overhead.png">
<meta property="article:published_time" content="2023-10-04T09:07:43.000Z">
<meta property="article:modified_time" content="2024-03-15T15:18:33.237Z">
<meta property="article:author" content="LiyunZhang">
<meta property="article:tag" content="Sys4AI">
<meta property="article:tag" content="Deployment">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://liyun-zhang.github.io/imgs/Sys4ai/Elf/partition.png">


<link rel="canonical" href="http://liyun-zhang.github.io/2023/10/04/Paper/Sys4AI/ELF/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://liyun-zhang.github.io/2023/10/04/Paper/Sys4AI/ELF/","path":"2023/10/04/Paper/Sys4AI/ELF/","title":"Elf"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Elf | LiyunZhang</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LiyunZhang</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Purpose"><span class="nav-number">1.</span> <span class="nav-text">Purpose</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Model"><span class="nav-number">2.</span> <span class="nav-text">Model</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#What-is-the-pipeline-of-Elf"><span class="nav-number">2.1.</span> <span class="nav-text">What is the pipeline of Elf?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Region-proposals"><span class="nav-number">2.2.</span> <span class="nav-text">Region proposals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-predict-region-proposals"><span class="nav-number">2.2.1.</span> <span class="nav-text">How to predict region proposals?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-do-we-index-region-proposals"><span class="nav-number">2.2.2.</span> <span class="nav-text">How do we index region proposals?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Offloading"><span class="nav-number">2.3.</span> <span class="nav-text">Offloading</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-optimize-Elf%E2%80%99s-schedule-problem"><span class="nav-number">2.3.1.</span> <span class="nav-text">How to optimize Elfâ€™s schedule problem?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-send-RP-coordinates-and-the-original-image-instead-of-a-cropped-RP-task"><span class="nav-number">2.3.2.</span> <span class="nav-text">Why send RP coordinates and the original image instead of a cropped RP task?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-generate-RP-boxes"><span class="nav-number">2.3.3.</span> <span class="nav-text">How to generate RP boxes?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-do-we-estimate-server-capacity-and-RP-computation-cost"><span class="nav-number">2.3.4.</span> <span class="nav-text">How do we estimate server capacity and RP computation cost?</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Evaluation"><span class="nav-number">3.</span> <span class="nav-text">Evaluation</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LiyunZhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">

  
  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://liyun-zhang.github.io/2023/10/04/Paper/Sys4AI/ELF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiyunZhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Elf | LiyunZhang">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Elf
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-04 17:07:43" itemprop="dateCreated datePublished" datetime="2023-10-04T17:07:43+08:00">2023-10-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-03-15 23:18:33" itemprop="dateModified" datetime="2024-03-15T23:18:33+08:00">2024-03-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Paper-Notebook/" itemprop="url" rel="index"><span itemprop="name">Paper Notebook</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Paper-Notebook/Sys4AI/" itemprop="url" rel="index"><span itemprop="name">Sys4AI</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>Paper: <a target="_blank" rel="noopener" href="https://dl.acm.org/doi/abs/10.1145/3447993.3448628">Elf: Accelerate High-resolution Mobile Deep Vision with Content-aware Parallel Offloading</a></p>
<p>@[toc]</p>
<h1 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a>Purpose</h1><ol>
<li>To support applications running deep neural networks on multimedia data in real-time, having mobile devices offload the computation, especially the neural network inference, to edge clouds has proved effective. </li>
<li>Issues: <ul>
<li>In reality, we may not be able to find a dedicated and powerful server but must make do with less powerful ones. </li>
<li>Various techniques to make DNN models smaller to reduce the computation load lead to compromised model accuracy due to the fundamental trade-off between model size and model accuracy. </li>
<li>The inference latency can be significantly reduced by offloading the intensive model inference to a powerful edge server and with the high bandwidth and low latency provided by the emerging 5G networks. <ul>
<li>Most existing solutions use low-resolution images throughout the entire pipeline. </li>
<li>Most existing methods only consider offloading tasks between a single pair of servers and clients, assuming that no competing clients or extra edge resources are available. </li>
<li>The heterogeneous resource demands of applications running on edge servers and highly dynamic workloads by mobile users lead to resource fragmentation. </li>
</ul>
</li>
</ul>
</li>
<li>Challenges:<ul>
<li>The client must effectively partition the inference job into multiple pieces while maintaining the inference accuracy. </li>
<li>The system needs to be aware of available computation resources on each server and dynamically develop the frame partitioning solution to ensure no server in the parallel offloading procedure becomes the bottleneck. </li>
<li>Such a system should have a general framework design independent of its host deep vision applications.</li>
</ul>
</li>
<li>Contribution: <ul>
<li>The idea is to partition the video frame and offload the partial inference tasks to multiple servers for parallel processing. </li>
<li>Elf is a framework to accelerate high-resolution mobile deep vision offloading in heterogeneous client and edge server environments, by adaptively distributing the computation to available edge servers.</li>
<li>It employs a recurrent region proposal prediction algorithm, a region proposal centric frame partitioning, and a resource-aware multi-offloading scheme. </li>
</ul>
</li>
</ol>
<h1 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h1><h2 id="What-is-the-pipeline-of-Elf"><a href="#What-is-the-pipeline-of-Elf" class="headerlink" title="What is the pipeline of Elf?"></a>What is the pipeline of Elf?</h2><ol>
<li>The first phase is recurrent region proposal prediction. <ul>
<li>On the mobile end, whenever a new video frame arrives, Elf predicts its region proposals (RPs) based on the ones detected in historical frames. </li>
<li>The algorithm must be lightweight, effectively learn the motion model of the objects/RPs from history frames, and pay more attention to recent frames. </li>
<li>Efficiently utilizing the historical RP inference results converts the computing-intensive image regression problem to a lightweight time series prediction problem. </li>
<li>An RP indexing algorithm keeps track of the motion across frames. A Low-Resolution Compensation scheme is proposed to handle new objects when they first appear. </li>
</ul>
</li>
<li>The second phase is frame partitioning and offloading. <ul>
<li>Ideally, a well-designed frame partitioning scheme should show a negligible overhead and have heterogeneous edge servers to finish parallel inference tasks at the same time. </li>
<li>The partitioning algorithm should be inclusive and aware of the number of and locations of RPs in a frame. Also, Elf discards background pixels that are unlikely to contain any RPs. </li>
<li>Partitions have different computation costs depending on the objects in each partition. The algorithm should consider this cost heterogeneity to achieve load balancing among the servers. </li>
<li>Unlike central clouds, edge cloud servers exhibit heterogeneous computing/storage/networking resources due to their distributed nature and high user mobility. Poor offloading may result in job stragglers completing tasks much slower than their peers, thus significantly increasing the overall latency. </li>
</ul>
</li>
<li>The last phase is partial inference and result integration. <ul>
<li>Taking the offloaded partitions as input, the edge servers run the application-specific CNN models to yield partial inference results. </li>
<li>These partial results are finally integrated on the mobile side to render the final result. </li>
</ul>
</li>
</ol>
<h2 id="Region-proposals"><a href="#Region-proposals" class="headerlink" title="Region proposals"></a>Region proposals</h2><h3 id="How-to-predict-region-proposals"><a href="#How-to-predict-region-proposals" class="headerlink" title="How to predict region proposals?"></a>How to predict region proposals?</h3><ol>
<li>An attention-based LSTM network is used to predict region proposals. <ul>
<li>It takes only the RPs of the past $N$ frames without the image of the current frame as its input and outputs the RPs of the current frame. </li>
<li>It can only handle the objects that already occurred in the previous frame. </li>
</ul>
</li>
<li>To handle new objects and reduce the computation overhead, Elf runs LRC once per n frames. <ul>
<li>$n$ is a hyperparameter, indicating the trade-off between computation cost and at most $n$-frame delay to realize new objects. </li>
<li>First, LRC down-samples a high-resolution video frame using a max-pooling operation. </li>
<li>Then Elf offloads the resized video frame and the partitions from regular-sized partitions to edge servers to run application-specific models, which usually consist of an object detection component. </li>
<li>Based on the inference results, Elf can roughly locate the new objects in the frame. </li>
</ul>
</li>
<li>The predicted RP bounding box may not cover all the pixels of an object due to motion. <ul>
<li>The bounding box is expanded by $p\%$. The downside of this scheme is the increased data transmission and computation. </li>
<li>It consults the corresponding RP position shift and the prediction confidence level as the indicators to assign different weights on $p$. </li>
</ul>
</li>
</ol>
<h3 id="How-do-we-index-region-proposals"><a href="#How-do-we-index-region-proposals" class="headerlink" title="How do we index region proposals?"></a>How do we index region proposals?</h3><ol>
<li>Vision-based matching algorithms are not considered because they introduce significant overheads in hundreds of milliseconds. </li>
<li>From the first video frame, Elf assigns a unique index to each region proposal. <ul>
<li>Elf matches each RP with the corresponding index assigned earlier in each upcoming frame. </li>
<li>If an RP includes a new object not seen before, a new index will be automatically assigned. </li>
</ul>
</li>
<li>Match the RPs across frames with a combination of RP position shift and RP area shift. <ul>
<li>The RP position shift measures the change of the center point along the x-/y-axis between the current frame and the previous frame. A larger value indicates a bigger spatial shift and, thus, a lower matching probability. </li>
<li>The RP area shift measures the area change between the RPs in two adjacent frames. A lower value indicates a higher matching probability. </li>
<li>When the x and y RP position shift are both under $0.02$ and the area shift ratio is under $0.2$, we declare a match. </li>
</ul>
</li>
</ol>
<h2 id="Offloading"><a href="#Offloading" class="headerlink" title="Offloading"></a>Offloading</h2><h3 id="How-to-optimize-Elfâ€™s-schedule-problem"><a href="#How-to-optimize-Elfâ€™s-schedule-problem" class="headerlink" title="How to optimize Elfâ€™s schedule problem?"></a>How to optimize Elfâ€™s schedule problem?</h3><ol>
<li>Assuming $M$ is the total number of RPs, while $N$ is the total number of servers; Elf packs the $M$ RP processing tasks and one LRC task into $Nâ€™$ offloading tasks ($Nâ€™â‰¤N$ ), and offloads each task onto an edge server. </li>
<li>The overall objective of the partitioning and the offloading process is to minimize the completion time of the offloading tasks that are distributed across $Nâ€™$ edge servers, i.e., minimizing the task completion time, which has the longest execution time among all the tasks. </li>
<li>The optimization objective can be written as <ul>
<li>$\min\max(\{T^t_k\}), k\in[1,\dots,Nâ€™]\text{,}\\ \text{s.t. }\ T^t_k=T^t_{res,k}+T^t_{lrc,k}\cdot1(t\mod n=0)\cdot1(\arg\max\{p^t\}=k)\text{, }T^t_{rps,k}\approx\frac{C^t_{rps,k}}{p^t_k}\text{, }T^t_{lrc,k}\approx\frac{C^t_{lrc,k}}{p^t_k}$</li>
<li>$T^t_k$ is the completion time on the $k$-th server at the time-$t$, which consists of two completion-time terms, $T^t_{rps,k}$ and $T^t_{lrc,k}$ for RPs and LRC, respectively. </li>
<li>$C^t_{rps,k}$ and $C^t_{lrc,k}$ are the computing costs of the RP box and LRC offloading to the server $k$ while $p^t_k$ is the available resource capacity of the $k$-th server. </li>
</ul>
</li>
</ol>
<h3 id="Why-send-RP-coordinates-and-the-original-image-instead-of-a-cropped-RP-task"><a href="#Why-send-RP-coordinates-and-the-original-image-instead-of-a-cropped-RP-task" class="headerlink" title="Why send RP coordinates and the original image instead of a cropped RP task?"></a>Why send RP coordinates and the original image instead of a cropped RP task?</h3><ol>
<li>The execution time of $r$ ($r$ is a small number, such as $2$ and $3$) small RP (e.g., $&lt;5\%$ size of the original image) tasks are not much less than $r$ times of the execution time of running a single $r$-fold RP task. </li>
<li>It is hard to determine a good cropping strategy. <ul>
<li>The precise cut-out of individual RPs will lead to poor detection inference accuracy due to the lack of necessary background pixels. </li>
<li>If we leave large padding around the RPs, the total offloaded data will be too large to be efficient. </li>
</ul>
</li>
<li>Too many cropping operations generate high memory copy overheads, which may become problematic for mobile devices. </li>
</ol>
<h3 id="How-to-generate-RP-boxes"><a href="#How-to-generate-RP-boxes" class="headerlink" title="How to generate RP boxes?"></a>How to generate RP boxes?</h3><ol>
<li>Compared to a single RP, an RP-box is larger and consists of one or more nearby RPs. <ul>
<li>Each offloading task consists of either an LRC task, or an RP-box processing task, or both. </li>
<li>By scheduling an RP box instead of individual RPs, we can avoid fragmentation problems. </li>
</ul>
</li>
<li>The number of available edge servers determines the number of offloading tasks. </li>
<li><strong>RP box initialization</strong>: Before partitioning a frame, Elf first crops the area with all the RPs and horizontally partitions it into $N$ segments ($N$ is the number of available servers), where each segment corresponds to an initial RP box. <ul>
<li>The size of each RP box is initialized to be proportional to the available resource of the corresponding server.</li>
<li>At the LRC round, we partition the cropped image into $N âˆ’ 1$ segments and have $N âˆ’ 1$ RP boxes accordingly. We reserve one server for the LRC task. </li>
</ul>
</li>
<li><strong>RP association</strong>: Elf evaluates its spatial relationship with all the RP boxes for each RP. Given a pair of RP $r$ and box $b$, <ul>
<li>If $r$ is completely included in $b$ and we conveniently associate them. </li>
<li>If $r$ and $b$ are not overlap, $r$ is not associated with $b$. </li>
<li>If $r$ and $b$ are partially overlapped, it also overlaps with at least one other box. We choose to associate with the RP box that has the most overlap with the RP. <ul>
<li>If there is a tie, we choose the RP box with a larger gap between the server resource capacity and the computation costs of the RPs that are already associated. </li>
</ul>
</li>
</ul>
</li>
<li><strong>RP box adjustment</strong>: Elf resizes each RP box so that it can fully cover all the RPs that are associated with it. <ul>
<li>The computation cost of some RP boxes may drastically increase compared to the initialization stage and thus break the intended load balancing. </li>
<li>We examine those RP boxes whose cost increase exceeds a pre-defined threshold. For these boxes, we re-associate the RP with the lowest cost to the neighboring box, which has enough computation capacity to hold this RP. </li>
<li>After each re-association, the two boxes must adjust their sizes accordingly and estimate the new computation cost. We stop this process if the re-association results in a higher load imbalance. </li>
</ul>
</li>
<li>The $C^t_{rps,k}=\sum_v\{C^t_{rp,v}\}$ and $C^t_{lrc}=\alpha\cdot(\sum^M_{k=1}C^t_{rps,k})$.<br><img src="/imgs/Sys4ai/Elf/partition.png" width="50%"></li>
</ol>
<h3 id="How-do-we-estimate-server-capacity-and-RP-computation-cost"><a href="#How-do-we-estimate-server-capacity-and-RP-computation-cost" class="headerlink" title="How do we estimate server capacity and RP computation cost?"></a>How do we estimate server capacity and RP computation cost?</h3><ol>
<li>There are two approaches to estimating server capacity. <ul>
<li>The first approach is through passive profiling. <ul>
<li>It calculates the server mâ€™s average end-to-end latency $T_m$ over the last $n$ (default value of $7$) offloading requests that are served by $m$. Then, the resource capacity is defined as $1/T_m$. </li>
<li>This passive profiling can help evaluate the trade-off between computing and network resources. </li>
</ul>
</li>
<li>The second approach is through proactive profiling: Elf periodically queries the server for its GPU utilization. </li>
</ul>
</li>
<li>There are also two ways of estimating an RPâ€™s computation cost. <ul>
<li>The first approach is based on the RPâ€™s area, assuming the cost is linearly proportional to the RPâ€™s area. </li>
<li>The second approach is through Spatially Adaptive Computation Time (SACT). Elf can accordingly estimate the cost of an RP at the pixel level. <ul>
<li>SACT is an optimization that early stops partial convolutional operations by evaluating the confidence of the outputs of intermediate layers. </li>
<li>SACT indicates how much computation has been applied with each pixel of a raw frame input. </li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h1><ol>
<li>The author measured the latency of Elf using different numbers of servers. <ul>
<li>The latency with different server numbers highly depends on the size of the RP boxes shipped to each edge server. </li>
<li>The inference time shows distinct sensitivity among different deep vision models. <ul>
<li>The models with more, even fully, convolutional operations present a stronger correlation between frame resolution and inference latency. </li>
<li>Two-stage models usually generate the same number of Regions of Interest (ROI) independent of the input resolution and then ship each down the pipeline. The second stage thus costs the same time. </li>
<li>Two-stage models can dynamically adjust the number of ROI based on the frame resolution as a higher resolution input potentially involves more objects.<br><img src="/imgs/Sys4ai/Elf/server_num.png" width="15%"></li>
</ul>
</li>
</ul>
</li>
<li>The cost of each processing part: <ul>
<li>At the server end, the GPU utilization v.s. GPU numbers are measured. <ul>
<li>On average, Elf-3 only consumes $1.7\times$ GPU utilization in total running with $3$ GPUs, then <em>SO</em> to finish a single request. </li>
<li>A lower per GPU utilization allows Elf to have more of a chance to efficiently utilize those resource fragmentations, thus improving the total GPU utilization of edge servers.<br><img src="/imgs/Sys4ai/Elf/GPUutilization.png" width="15%"></li>
</ul>
</li>
<li>On the communication side, they measured the latency under different network conditions. <ul>
<li>Elf is less sensitive to the network bandwidth because it offloads much less data than SO.<br><img src="/imgs/Sys4ai/Elf/network.png" width="15%"></li>
</ul>
</li>
<li>At the mobile end, they measured Elfâ€™s overhead. <ul>
<li>RP prediction costs 70%+ of the total time as the attention LSTM model is implemented in Python and exported to C++ with TorchScript. It can be improved by rewriting the prediction model with TensorRT.<br><img src="/imgs/Sys4ai/Elf/overhead.png" width="15%"></li>
</ul>
</li>
</ul>
</li>
<li>The inference accuracy and offload ratio of attention-based LSTM against vanilla LSTM, the fast tracker, showed the effectiveness of attention-based LSTM. </li>
<li>The impact of hyperparameters, e.g., the LRC parameter and RP expansion ratio, is measured. </li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Sys4AI/" rel="tag"><i class="fa fa-tag"></i> Sys4AI</a>
              <a href="/tags/Deployment/" rel="tag"><i class="fa fa-tag"></i> Deployment</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/09/27/Paper/Sys4AI/SiloD/" rel="prev" title="SiloD">
                  <i class="fa fa-chevron-left"></i> SiloD
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/10/06/Paper/Sys4AI/SparDA/" rel="next" title="SparDA">
                  SparDA <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiyunZhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous">



</body>
</html>
